# The script of the game goes in this file.

# Declare characters used by this game. The color argument colorizes the
# name of the character.

define n = Character(None) 
define u = Character("???")
define mc = Character("[name]")
define smc = Character(image = "mc", what_italic = True, what_kerning = 3) 
define smcs = Character(image = "mc")
define bb = Character("Bad Boy")
define sbb = Character(image = "bb")
define d = Character("Detective")
define sd = Character(image = "d")
define gg = Character("Gentle Giant")
define sgg= Character(image = "gg")
define cc = Character("Cute Cook")
define scc = Character(image = "cc")
define pg = Character("Pretty Girl")
define spg = Character(image = "pg")
define bl = Character("Barista Lady")
define sbl = Character(image = "bl")
define bm1 = Character("Business Man 1")
define sbm1 = Character(image = "bm1")
define bm2 = Character("Business Man 2")
define sbm2 = Character(image = "bm2")
define lbguy = Character("Love Bird Guy")
define slbguy = Character(image = "lbguy")
define lbgirl = Character("Love Bird Girl")
define slbgirl = Character(image = "lbgirl")
define e = Character("Editor")

### customs

define flash = Fade(0.2, 0.0, 0.8, color='#fff')

### transforms

transform center:
    xalign 0.5
    yalign 1.0

transform newcenter:
    zoom 2.0
    xalign 0.5

transform slightright:
    xalign 0.75
    yalign 1.0

transform slightleft:
    xalign 0.25
    yalign 1.0


transform completeleft:
    xalign 0.0
    yalign 1.0

transform lurking:
    xalign 0.5
    yalign 3.0

transform bigcenter:
    xpos 0.5
    xanchor 0.5
    ypos 0.5
    yanchor 0.5
    xalign 0.5
    yalign 0.5

transform tremblecenter:
    xalign 0.5 yalign 1.0
    linear 0.05 xalign 0.497
    linear 0.05 xalign 0.5
    repeat 

transform swaycenter:
    xalign 0.5 yalign 1.0
    linear 0.09 xalign 0.497
    linear 0.09 xalign 0.5
    repeat 

transform tremble:
    xalign 0.75 yalign 1.0
    linear 0.05 xalign 0.745
    linear 0.05 xalign 0.75
    repeat 3

transform glitch:
    xalign 0.75 yalign 1.0
    linear 0.05 xalign 0.745
    linear 0.05 xalign 0.75
    repeat

transform shake:
    xalign 0.75 yalign 1.0
    linear 0.08 yalign 1.05
    linear 0.08 yalign 1.0
    repeat 

transform breathecenter:
    xalign 0.5 yalign 1.0
    linear 0.3 yalign 1.05
    linear 0.3 yalign 1.0
    repeat 

transform pantstop:
    xalign 0.75 yalign 1.0
    linear 0.08 yalign 1.05
    linear 0.08 yalign 1.0
    repeat 3

transform pant:
    xalign 0.75 yalign 1.0
    pause 0.7
    linear 0.08 yalign 1.07
    linear 0.08 yalign 0.95
    linear 0.08 yalign 1.0
    pause 1.1
    repeat 

transform quip:
    xalign 0.5 yalign 1.1
    linear 0.1 yalign 0.92
    linear 0.08 yalign 1.17
    linear 0.1 yalign 1.0
    repeat 1

transform textbox:
    xalign 0.0
    yalign 3.0

transform sitting:
    xpos 0.2
    ypos 0.0


### Scenes
     
screen middle1:
    if pg_name == True:
        imagebutton:
            xanchor 0.5
            yanchor 0.5
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_up_%s.png"
            action Play("sound", "audio/boing.wav"), Jump("investigation_middle")
        imagebutton:
            #xanchor 1.1
            xanchor -1.4
            #yanchor 0.5
            yanchor 0.5
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_right_%s.png"
            action Play("sound", "audio/boing.wav"), Jump("deadbody_3")

    else:
        imagebutton:
            xanchor 0.5
            yanchor 0.5
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_up_%s.png"
            action Play("sound", "audio/boing.wav"), Jump("middle1")

screen middle2:
    if pg_name:
        imagebutton:
            #xanchor -0.1
            xanchor 0.5
            yanchor 0.5
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_down_%s.png"
            action Play("sound", "audio/boing.wav"), NullAction()

        imagebutton:
            #xanchor 1.1
            xanchor 2.1
            #yanchor 0.5
            yanchor 1.3
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_up_left_%s.png"
            action Play("sound", "audio/boing.wav"), NullAction()

    else:
        imagebutton:
            #xanchor -0.1
            xanchor 0.5
            yanchor 0.5
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_down_%s.png"
            action Play("sound", "audio/boing.wav"), Jump("middle2")

        imagebutton:
            #xanchor 1.1
            xanchor 2.1
            #yanchor 0.5
            yanchor 1.3
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_up_left_%s.png"
            action Play("sound", "audio/boing.wav"), Jump("hallway_intro")

screen hallway_intro:
    imagebutton:
        xanchor 0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_down_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("middle2")

    imagebutton:
        xanchor 1.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_up_left_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("kitchen")

    imagebutton:
        xanchor 0.5
        yanchor 1.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_up_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("restroom")

    if freedom_flag == True:
        imagebutton:
            xanchor -0.5
            yanchor 0.5
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_up_right_%s.png"
            action Play("sound", "audio/boing.wav"), Jump("trash")
    else: 
        pass

screen hallway_intro_after:
    imagebutton:
        xanchor 0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_down_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("middle2")

    imagebutton:
        xanchor 1.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_up_left_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("kitchen")

    imagebutton:
        xanchor 0.5
        yanchor 1.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_up_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("restroom")

    if freedom_flag == True:
        imagebutton:
            xanchor -0.5
            yanchor 0.5
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_up_right_%s.png"
            action Play("sound", "audio/boing.wav"), Jump("trash")
    else:
        pass

screen kitchen:
    imagebutton:
        xanchor 0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_down_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("hallway_intro")

screen restroom:
    imagebutton:
        xanchor 0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_down_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("hallway_intro")

screen exit:
    imagebutton:
        xanchor 0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_up_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("exit")

screen entrance:
    imagebutton:
        xanchor 0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_down_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("entrance")

screen parkinglot_intro:
    imagebutton:
        xanchor 0.5
        yanchor 2.5
        xpos 0.5
        ypos 0.85
        idle "gui/testbutton_hover.png"
        hover "gui/testbutton_idle.png"
        action Play("sound", "audio/bell.wav"), Jump("entrance")

    #imagebutton:
    #    xanchor 0.5
    #    yanchor 0.5
    #    xpos 0.5
    #    ypos 0.85
    #    auto "gui/arrow_down_%s.png"
    #    action Play("sound", "audio/boing.wav"), Jump("parked")
   
    imagebutton:
        xanchor 1.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_up_left_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("diner_back")    

    imagebutton:
        xanchor -0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_right_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("cars")

screen cars:
    imagebutton:
        xanchor 0.5
        yanchor 1.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_up_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("trash")
    imagebutton:
        xanchor 0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_down_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("outside_intro")  

screen trash:
    imagebutton:
        xanchor 0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_down_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("cars")
    if freedom_flag == True:
        imagebutton:
            xanchor 1.5
            yanchor 0.5
            xpos 0.5
            ypos 0.85
            auto "gui/arrow_up_left_%s.png"
            action Play("sound", "audio/boing.wav"), Jump("hallway_intro")
    else:
        pass

screen diner_back:
    imagebutton:
        xanchor 0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_down_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("outside_intro")  

screen leave_detective:
    imagebutton:
        xanchor -0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_right_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("idcards_take")

screen leave_detective_2:
    imagebutton:
        xanchor -0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_right_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("identify_body_2")

screen leave_detective_3:
    imagebutton:
        xanchor -0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_right_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("investigation_starts")

screen go_detective:
    imagebutton:
        xanchor -0.5
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_right_%s.png"
        action Play("sound", "audio/boing.wav"), Jump("identify_body")


### Ending Screens

screen rude_ending:
    frame:
        xalign 0.5
        yalign 0.5
        textbutton "Rude Ending Achieved!":
            text_size 80
            action Hide("rude_ending"), Show("rude_ending_why")

screen rude_ending_why:
    frame:
        xalign 0.5
        yalign 0.5
        textbutton "But why would you want this ending...?":
            text_size 35
            action Return()

### Tools

screen mask:
    image "images/triangles.png"

screen qmenu:
    modal True
    #image "images/triangles.png"
    image "menus/quick_menu08.png":
        xalign 0.5
        yalign 0.5
    imagebutton:
        auto "buttons/menu_close_%s.png"
        hovered [Play("sound", "audio/click2.wav")]
        #xpos 1671
        #ypos 112
        #xpos 1695
        #ypos 126
        #yalign 0.54
        xpos 1675
        ypos 144
        action Hide("game_menu"), Hide("qmenu"), Return()
        #Play("sound", "audio/click.wav"),
    vbox:
            xalign 0.2
            yalign 0.55
            spacing 40
            #textbutton _("Back") action Rollback()
            #textbutton _("Skip") action Skip() alternate Skip(fast=True, confirm=True)
            #textbutton _("Auto") action Preference("auto-forward", "toggle")
            textbutton _("☼    Main Menu") action Play("sound", "audio/lasershot.wav"), MainMenu() 
            textbutton _("☼    Save") action Play("sound", "audio/lasershot.wav"), ShowMenu('save') 
            #textbutton _("☼    Q.Save") action QuickSave()
            #textbutton _("☼    Q.Load") action QuickLoad()
            textbutton _("☼    Load") action Play("sound", "audio/lasershot.wav"), ShowMenu("load") 
            textbutton _("☼    Back") action Play("sound", "audio/lasershot.wav"), Rollback() 
    #vbox:
            #hovered [Play("sound", "audio/bell2.wav")]
            #xalign 0.65
            #yalign 0.5
            #spacing 100
            textbutton _("☼    Prefs") action Play("sound", "audio/lasershot.wav"), ShowMenu('preferences') 
            textbutton _("☼    Log") action Play("sound", "audio/lasershot.wav"), ShowMenu ('history') 
            textbutton _("☼    Quit") action Play("sound", "audio/lasershot.wav"), Quit(confirm=not main_menu) 
    #image "images/triangles.png"
    imagebutton:
        xanchor 0.0
        yanchor 0.0
        xoffset 20
        #auto "buttons/menu_icon_%s.png"
        #idle "buttons/menu_icon_idle.png"
        #hover "buttons/menu_icon_hover.png"
        auto "buttons/menu_icon_selected_%s.png"
        action Return()
        #Play("sound", "audio/pulse.wav"),

screen qmenu_button:
    #frame:
    #    xanchor 0.0
    #    yanchor 0.0
    #    xoffset 35
    #    yoffset 15
    #    ypadding -3
        #xpadding -1
    #    vbox:
    #        textbutton "Menu":
    #            text_size 30
    #            action Show("qmenu"), Hide("qmenu_button")
    #vbox:
    #    #xalign 0.5
    #    #yalign 0.5
    #    spacing 2
    #    xanchor 0.0
    #    yanchor 0.0
    #    xoffset 35
    #    yoffset 15
    #    frame:
    #        vbox:    
    #            textbutton "":
    #                xminimum 80
    #                ypadding -11
    #                text_size 25
    #                action Show("qmenu"), Hide("qmenu_button")    
    #    frame:
    #        vbox:
    #            textbutton "Menu":
    #                ypadding -5
    #                text_size 25
    #                action Show("qmenu"), Hide("qmenu_button")
    #    frame:
    #        vbox:
    #            textbutton "":
    #                xminimum 80
    #                ypadding -11
    #                text_size 25
    #                action Show("qmenu"), Hide("qmenu_button")    
    #vbox:
    #        textbutton "♦♦♦":
    #            xanchor 0.0
    #            yanchor 0.0
    #            xoffset 35
    #            yoffset 15
                #text_size 30
    #            action Show("qmenu"), Hide("qmenu_button")
    imagebutton:
        xanchor 0.0
        yanchor 0.0
        xoffset 20
        auto "buttons/menu_icon_%s.png"
        #hovered [Play("sound", "audio/softclick.wav")]
        #hovered [Play("sound", "audio/pulse.wav")]
        #hovered [Play("sound", "audio/click2.wav")]
        #hovered [Play("sound", "audio/notebook_sounds_thump.wav")]
        #idle "buttons/menu_icon_idle.png"
        #hover "buttons/menu_icon_hover.png"
        #selected_idle "buttons/menu_icon_selected_idle.png"
        #selected_hover "buttons/menu_icon_selected_hover.png"
        action Play("sound", "audio/bell.wav"), ShowMenu("qmenu")
        #, Hide("qmenu_button")

screen test:
    imagebutton:
        xanchor 1.0
        yanchor 0.0
        xpos 1.0
        ypos -0.15
        #ypos 0.4
        idle "gui/testbutton_idle.png"
        hover "gui/testbutton_hover.png"
        #action Jump("end")
        action Jump("end")

        #hovered Show("displayTextScreen", displayText = "hey")
        #unhovered Hide("displayTextScreen")

screen notebook_object:
    imagebutton: 
        auto "buttons/notebook_button_%s.png" 
        #idle "buttons/notebook_button_idle.png" 
        #hover "buttons/notebook_button_hover.png", [Play ("sound", "audio/notebook_sounds_page.wav")]
        #hovered [Play("sound", "audio/notebook_sounds_thump.wav")]
        #selected [Play ("sound", "audio/notebook_sounds_page.wav")]
        xalign 0.9
        yalign 0.6
        #ypadding -3
        xoffset -35
        #yoffset 10
        action Hide("notebook_object", transition=Dissolve(0.5)), Play ("sound", "audio/lasershot.wav"), Jump ("name") 
        #Show("notebook_intro", transition=Dissolve(0.5))

screen notebook_intro:
    vbox:
        spacing 30
        xalign 0.5
        yalign 0.5        
        text "Name:"
        input default "Max":
            pixel_width (300)
            value VariableInputValue ("name")
            #action Show("notebook_button", transition=Dissolve(0.5))
        frame:
            yoffset 50
            xalign 0.5
            yalign 0.5
            textbutton "ok":
                action SetVariable("quick_menu", True), Play ("sound", "audio/notebook_sounds_thump.wav"), Hide("notebook_intro"), Jump ("named") 
    hbox:
            xpos 0.9
            xoffset -5
            yoffset 20
            textbutton "close":
                text_size 40
                action SetVariable("quick_menu", True), Play ("sound", "audio/notebook_sounds_thump.wav"), Hide("notebook_intro"), Jump ("named")

screen notebook_people_intro:
    modal True
    frame:
        #vbox:
        #    #xoffset 200
        #    xoffset 60
        #    yoffset 150
        #    spacing 25
        #    textbutton "Me":
        #        action NullAction()
        fixed:
            vbox:
                xalign 0.48
                yalign 0.07
                text "[name]"
            image "images/player.png":
                yalign 0.5
                xpos 0.55
                xzoom 1.6
                yzoom 1.6
        vbox:
            #xoffset 200
            yoffset 250
            xpos 0.265
            #xalign 0.35
            spacing 65
            xmaximum 1000
            vbox:
                spacing 20
                text "Info:":
                    xoffset -50
                text "In my 20 somethings."
                text "My therapist said this was a good idea."
                text "Currently hungry"
        hbox:
            xpos 0.9
            xoffset -5
            yoffset 20
            textbutton "return":
                text_size 40
                action [Hide ("notebook_people_intro"), Play ("sound", "audio/lasershot.wav")]
                #Show("notebook_button", transition=Dissolve(1.5))

screen notebook_button:
    #imagebutton:
    #    xanchor 1.0
    #    yanchor 0.0
    #    xpos 1.0
    #    ypos -0.15
        #xanchor 0.0
        #yanchor 0.0
        #xpos 0.0
        #ypos -0.15
        #ypos 0.4
        ##idle "gui/testbutton_idle.png"
        ##hover "gui/testbutton_hover.png"
        #action NullAction()
    #    action Show("notebook_inside")
    #frame:
    #    xalign 1.0
    #    ypadding -3
    #    xoffset -35
    #    yoffset 15
    #    vbox:
    #        textbutton "Notebook":
    #            text_size 30
    #            action Show("notebook_inside")
    imagebutton: 
        auto "buttons/notebook_button_%s.png" 
        #idle "buttons/notebook_button_idle.png" 
        #hover "buttons/notebook_button_hover.png", [Play ("sound", "audio/notebook_sounds_page.wav")]
        hovered [Play("sound", "audio/notebook_sounds_thump.wav")]
        #selected [Play ("sound", "audio/notebook_sounds_page.wav")]
        xalign 1.0
        ypadding -3
        xoffset -35
        yoffset 10
        action SetVariable("quick_menu", False), Show("notebook_inside"), Play ("sound", "audio/notebook_sounds_onepage.wav")

screen notebook_inside:
    modal True
    frame:
        vbox:
            #xoffset 200
            #yoffset 150
            xalign 0.2
            yalign 0.5
            #xoffset -50
            spacing 50
            textbutton "Characters":
                text_size 50
                action Show("notebook_people"), Play ("sound", "audio/notebook_sounds_button.wav")
            
            if objects_notebook == True:
                textbutton "Objects":
                    text_size 50
                    action Show("notebook_objects"), Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                textbutton "???":
                    text_size 50

            #if info_notebook == True:
            textbutton "Information":
                text_size 50
                action Show("notebook_info"), Play ("sound", "audio/notebook_sounds_button.wav")
            #else:
                #textbutton "???":
                    #text_size 50

            if clues_notebook == True:
                textbutton "Clues":
                    text_size 50
                    action NullAction(), Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                textbutton "???":
                    text_size 50
        hbox:
            xpos 0.9
            xoffset -5
            yoffset 20
            textbutton "close":
                text_size 40
                action SetVariable("quick_menu", True), Play ("sound", "audio/notebook_sounds_thump.wav"), Hide("notebook_inside")

screen notebook_people:
    modal True
    frame:
        vbox:
            #xoffset 200
            xoffset 60
            yoffset 150
            spacing 25
            textbutton "Me":
                action [Show("notebook_people_mc"), Hide ("notebook_people_bl"), Hide ("notebook_people_d")], Play ("sound", "audio/notebook_sounds_button.wav")

            showif dd_name == True:
                textbutton "Detective":
                    action [Show("notebook_people_d"), Hide ("notebook_people_bl"), Hide ("notebook_people_mc")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass

            showif cc_name == True:
                textbutton "Cute Cook":
                    action NullAction()
            else:
                pass

            showif gg_name == True:
                textbutton "Gentle Giant":
                    action NullAction()
            else:
                pass

            showif bb_name == True:
                textbutton "Bad Boy":
                    action NullAction()
            else:
                pass

            showif bm1_name == True:
                textbutton "Business Man 1":
                    action NullAction()
            else:
                pass

            showif bm2_name == True:
                textbutton "Business Man 2":
                    action NullAction()
            else:
                pass

            showif bl_name == True:
                textbutton "Barista Lady":
                    action [Show("notebook_people_bl"), Hide ("notebook_people_d"), Hide ("notebook_people_mc")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass

            showif lbguy_name == True:
                textbutton "Love Bird Guy":
                    action NullAction()
            else:
                pass

            showif lbgirl_name == True:
                textbutton "Love Bird Girl":
                    action NullAction()
            else:
                pass

            showif lbgirl_name == True and pg_name == False:
                textbutton "???"

            elif pg_name == True:
                    textbutton "Pretty Girl":
                        action NullAction()
            else:
                pass
        hbox:
            xpos 0.9
            xoffset -5
            yoffset 20
            textbutton "return":
                text_size 40
                action [Hide("notebook_people"), Hide ("notebook_people_mc"), Hide ("notebook_people_bl"), Hide ("notebook_people_d")], Play ("sound", "audio/notebook_sounds_onepage.wav")

screen notebook_people_mc:
    #modal True
    fixed:
        vbox:
            xalign 0.48
            yalign 0.07
            text "[name]"
        image "images/player.png":
            yalign 0.5
            xpos 0.55
            xzoom 1.6
            yzoom 1.6
        vbox:
            #xoffset 200
            yoffset 250
            xpos 0.265
            #xalign 0.35
            spacing 65
            xmaximum 1000
            vbox:
                spacing 20
                text "Info:":
                    xoffset -50
                text "In my 20 somethings."
                text "Use flowers as bookmarks sometimes."
                text "Currently hungry"
            
        #hbox:
        #    xpos 0.9
        #    xoffset -5
        #    yoffset 20
        #    textbutton "return":
        #        text_size 40
        #        action Hide("notebook_people_mc")

screen notebook_people_d:
    #modal True
    fixed:
        vbox:
            xalign 0.48
            yalign 0.07
            text "Detective"
        image "images/detective.png":
            yalign 0.0
            xpos 0.55
            xzoom 1.5
            yzoom 1.5
        vbox:
            #xmaximum 550
            #xoffset 200
            yoffset 250
            xpos 0.265
            #xalign 0.35
            spacing 65
            xmaximum 600
            vbox:
                spacing 20
                text "Info:":
                    xoffset -50
                text "A man of great taste in novels."
                showif d_fear == True and d_fear_revealed == False:
                    text "Paralyzing fear of thunderstorms."
                showif d_fear and d_fear_revealed == True:
                    text "Paralyzing fear of thunderstorms, because of childhood trauma."
            vbox:
                spacing 10
                text "love points":
                    xoffset -50
                bar value VariableValue ("d_attraction_points", 50):
                    xmaximum 450
                    xoffset 50
            vbox:
                spacing 10
                text "friendship points":
                    xoffset -50
                bar range 10/10:
                    xmaximum 450
                    xoffset 50
            vbox:
                spacing 10
                text "morality":
                    xoffset -50
                bar range 10/10:
                    xmaximum 450
                    xoffset 50
                
                
        #hbox:
        #    xpos 0.9
        #    xoffset -5
        #    yoffset 20
        #    textbutton "return":
        #        text_size 40
        #        action Hide("notebook_people_d")

screen notebook_people_bl:
    #modal True
    fixed:
        vbox:
            xalign 0.48
            yalign 0.07
            text "Barista Lady"
        image "images/baristalady.png":
            yalign 0.1
            xpos 0.55
            xzoom 1.6
            yzoom 1.6
        vbox:
            #xoffset 200
            yoffset 250
            xpos 0.265
            #xalign 0.35
            spacing 65
            xmaximum 1000
            vbox:
                spacing 20
                text "Info:":
                    xoffset -50
                text "Maybe in her 50's?."
                text "Found out her name from her name tag."
                if lb_affection_points >= 2:
                    text "She seems nice."
                else:
                    pass

screen notebook_info:
    modal True
    frame:
        vbox:
            xoffset 60
            yoffset 150
            spacing 20
            showif cc_dream_info == True:
                vbox:
                    textbutton "cafe dream":
                        action [Show("notebook_info_cafedream"), Hide ("notebook_info_businessmeeting"), Hide ("notebook_info_adetectivestrauma")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
                        #action [Show("notebook_info_cafedream")], Play ("sound", "audio/notebook_sounds_button.wav")
            showif bm_meeting_info == True:
                vbox:
                    textbutton "business meeting":
                        action [Show("notebook_info_businessmeeting"), Hide ("notebook_info_cafedream"), Hide ("notebook_info_adetectivestrauma")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
            showif d_fear == True:
                vbox:
                    textbutton "a detective's trauma":
                        action [Show("notebook_info_adetectivestrauma"), Hide ("notebook_info_cafedream"), Hide ("notebook_info_businessmeeting")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
        hbox:
                xpos 0.9
                xoffset -5
                yoffset 20
                textbutton "return":
                    text_size 40
                    action [Hide("notebook_info"), Hide ("notebook_info_adetectivestrauma"), Hide ("notebook_info_cafedream"), Hide ("notebook_info_businessmeeting")], Play ("sound", "audio/notebook_sounds_onepage.wav")

screen notebook_info_cafedream:
    fixed:
        vbox:
            xalign 0.48
            yalign 0.07
            text "Cafe dream"
        if cc_name == True:
            image "images/cutecook.png":
                yalign 0.5
                xpos 0.55
                xzoom 1.6
                yzoom 1.6
        else: 
            pass
        vbox:
            #xoffset 200
            yoffset 250
            xpos 0.265
            #xalign 0.35
            spacing 65
            xmaximum 1000
            vbox:
                #spacing 20
                #xmaximum 720
                #hbox:
                #    textbutton "Cute Cook":
                #        yoffset -6.8
                #        xoffset -8
                #        #clicking name should bring you to character info screen
                #        action Play ("sound", "audio/notebook_sounds_onepage.wav"), NullAction()
                #    text "dreamed of opening a Cafe in"
                #hbox:
                #    text "the city, but"
                #    textbutton "his mother":
                #        yoffset -6.8
                #        #clicking name should bring you to character info screen
                #        action Play ("sound", "audio/notebook_sounds_onepage.wav"), NullAction()
                #    text"convinced him to"
                #text "stay managing the diner with her."
                #spacing 10
                spacing 30
                xmaximum 720
                if cc_name == True:
                    text "Cute Cook dreamed of opening a Cafe in the city, but his mother convinced him to stay managing the diner."
                else: 
                    text "The owner's son dreamed of opening a Cafe in the city, but his mother convinced him to stay managing the diner."
        hbox:
            #yoffset 250
            xalign 0.35
            spacing 5
            xmaximum 1000
            yalign 0.9  
            text "Heard from:"
                #xoffset 50
            textbutton "Barista Lady":
                #xoffset 50
                yoffset -6.8
                #clicking name should bring you to character info screen
                action Play ("sound", "audio/notebook_sounds_onepage.wav"), [Hide ("notebook_info_cafedream"), Show ("notebook_people"), Show ("notebook_people_bl")]
                
screen notebook_info_businessmeeting:
    fixed:
        vbox:
            xalign 0.48
            yalign 0.07
            text "Business Meeting"
        hbox:
            spacing -20
            image "images/businessman1.png":
                ypos 0.2
                xpos 2.05
                xzoom 1.0
                yzoom 1.0
            image "images/businessman2.png":
                ypos 0.2
                xpos 2.05
                xzoom 1.0
                yzoom 1.0
        vbox:
            #xoffset 200
            yoffset 250
            xpos 0.265
            #xalign 0.35
            spacing 65
            xmaximum 1000
            vbox:
                spacing 30
                xmaximum 720
                if bm1_name == True and bm2_name == True:
                    text "Bm1 and Bm2 were having a private business meeting; in a Cafe, in the middle of nowhere."
                    text "They either don't have an office or the coffee here is expectacular."
                else: 
                    text "Two men having a private business meeting in a Cafe in the middle of nowhere."
                    text "They either don't have an office or the coffee here is expectacular."

screen notebook_info_adetectivestrauma:
    fixed:
        vbox:
            xalign 0.48
            yalign 0.07
            text "A detective's trauma"
        hbox:
            image "images/detective.png":
                yalign 0.0
                xpos 1.45
                xzoom 1.5
                yzoom 1.5
        vbox:
            #xoffset 200
            yoffset 250
            xpos 0.265
            #xalign 0.35
            spacing 65
            xmaximum 1000
            vbox:
                spacing 30
                xmaximum 720
                if d_fear == True and d_fear_revealed == True:
                    text "Jay Wallace confided in me his paralyzing fear of thunderstorms due to childhood trauma."
                else: 
                    text "Jay Wallace confided in me his paralyzing fear of thunderstorms"

screen notebook_objects:
    modal True
    frame:
        grid 3 3:
            xalign 0.5
            yalign 0.5
            spacing 190
            showif businesscard == True:
                vbox:
                    textbutton "business card":
                        action [Hide ("notebook_objects"), Hide ("notebook_inside"), SetVariable("businesscard", False), SetVariable("quick_menu", True), Jump ("businesscard")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
            showif businesscard == False:
                vbox:
                    textbutton "business card":
                        action NullAction() #[Hide ("notebook_objects"), Hide ("notebook_inside"), SetVariable("businesscard", False), SetVariable("quick_menu", True), Jump ("businesscard")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
            showif businesscard == False:
                vbox:
                    textbutton "business card":
                        action NullAction() #[Hide ("notebook_objects"), Hide ("notebook_inside"), SetVariable("businesscard", False), SetVariable("quick_menu", True), Jump ("businesscard")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
            showif businesscard == False:
                vbox:
                    textbutton "business card":
                        action NullAction() #[Hide ("notebook_objects"), Hide ("notebook_inside"), SetVariable("businesscard", False), SetVariable("quick_menu", True), Jump ("businesscard")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
            showif businesscard == False:
                vbox:
                    textbutton "business card":
                        action NullAction() #[Hide ("notebook_objects"), Hide ("notebook_inside"), SetVariable("businesscard", False), SetVariable("quick_menu", True), Jump ("businesscard")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
            showif businesscard == False:
                vbox:
                    textbutton "business card":
                        action NullAction() #[Hide ("notebook_objects"), Hide ("notebook_inside"), SetVariable("businesscard", False), SetVariable("quick_menu", True), Jump ("businesscard")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
            showif businesscard == False:
                vbox:
                    textbutton "business card":
                        action NullAction() #[Hide ("notebook_objects"), Hide ("notebook_inside"), SetVariable("businesscard", False), SetVariable("quick_menu", True), Jump ("businesscard")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
            showif businesscard == False:
                vbox:
                    textbutton "business card":
                        action NullAction() #[Hide ("notebook_objects"), Hide ("notebook_inside"), SetVariable("businesscard", False), SetVariable("quick_menu", True), Jump ("businesscard")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
            showif businesscard == False:
                vbox:
                    textbutton "business card":
                        action NullAction() #[Hide ("notebook_objects"), Hide ("notebook_inside"), SetVariable("businesscard", False), SetVariable("quick_menu", True), Jump ("businesscard")], Play ("sound", "audio/notebook_sounds_button.wav")
            else:
                pass
        hbox:
                xpos 0.9
                xoffset -5
                yoffset 20
                textbutton "return":
                    text_size 40
                    action Hide("notebook_objects"), Play ("sound", "audio/notebook_sounds_onepage.wav")


## interrogation stuff

screen interrogation_button:
    #imagebutton:
    #    xanchor 1.0
    #    yanchor 0.5
    #    xpos 1.0
    #    ypos 0.5
    #    #ypos 0.4
    #    idle "gui/testbutton_hover.png"
    #    hover "gui/testbutton_idle.png"
    #    action Show("interrogation")

    imagebutton: 
        auto "buttons/notebook_button_%s.png"
        xalign 1.0
        ypadding -3
        xoffset -35
        yoffset 10
        action Show("interrogation"), Play ("sound", "audio/notebook_sounds_button.wav")

screen interrogation:
    default interrogation_flag = True
    modal True
    image "images/colors_dark.png"
    vbox:
        xalign 0.15
        ypos 0.5
        yanchor 0.5
        spacing 250
        imagebutton:
            auto "gui/button/people_button_%s.png"
            action Show("people")
        imagebutton:
            auto "gui/button/questions_button_%s.png"
            action Show("questions")
    vbox:
        xalign 0.85
        ypos 0.5
        yanchor 0.5
        spacing 250
        imagebutton:
            auto "gui/button/objects_button_%s.png"
            action Show("objects")
        imagebutton:
            auto "gui/button/specials_button_%s.png"
            action Show("specials")
    hbox:
        xalign 0.5
        image "images/detective.png":
            xzoom 1.2
            yzoom 1.2
    frame:
        xalign 0.97
        yalign 0.0
        yoffset 30
        vbox:
            textbutton "leave":
                text_size 39
                action [Hide("interrogation"), Jump("detective_after")]         

screen people:
    modal True
    image "images/colors_dark.png"
    grid 5 2:
            xalign 0.5
            ypos 0.55
            yanchor 0.5
            spacing 30
            imagebutton:
                idle "images/side/side mc.png"
                action [Hide("people"), Hide("interrogation"), Jump("people_mc")]
            imagebutton:
                idle "images/side/side bb.png"
                action NullAction()
            imagebutton:
                idle "images/side/side gg.png"
                action NullAction()
            imagebutton:
                idle "images/side/side cc.png"
                action NullAction()
            imagebutton:
                idle "images/side/side pg.png"
                action NullAction()
            imagebutton:
                idle "images/side/side bl.png"
                action NullAction()
            imagebutton:
                idle "images/side/side lbgirl.png"
                action NullAction()
            imagebutton:
                idle "images/side/side lbguy.png"
                action NullAction()
            imagebutton:
                idle "images/side/side bm1.png"
                action NullAction()
            imagebutton:
                idle "images/side/side bm2.png"
                action NullAction()
    frame:
        xalign 0.97
        yalign 0.0
        yoffset 30
        vbox:
            textbutton "return":
                text_size 39
                action Hide("people")

screen questions:
    modal True
    image "images/colors_dark.png"
    hbox:
        xalign 0.5
        image "images/detective.png":
            xzoom 1.2
            yzoom 1.2
    vbox:
        xalign 0.5
        yalign 0.67
        #spacing 50
        spacing 75
        image "gui/button/choice_idle_background.png"
        image "gui/button/choice_idle_background.png"
    vbox:
        xalign 0.5
        yalign 0.67
        #spacing 50
        spacing 75
        #frame:
            #image "gui/button/choice_idle_background.png"
            #xmaximum 600
            #ymaximum 100
                #xminimum 600
                #yminimum 100
        textbutton "Do you like me?":
            xalign 0.5 
            text_size 35
            action [Hide("questions"), Hide("interrogation"), Jump("d_affection")]
        #frame:
            #image "gui/button/choice_idle_background.png"
            #xmaximum 600
            #ymaximum 100
                #xminimum 600
                #yminimum 100
        textbutton "Do I like you?":
            xalign 0.5 
            text_size 35
            action [Hide("questions"), Hide("interrogation"), Jump("d_interest")]
    frame:
        xalign 0.97
        yalign 0.0
        yoffset 30
        vbox:
            textbutton "return":
                text_size 39
                action Hide("questions")

screen d_answers:
    modal True
    image "images/colors_dark.png"
    hbox:
        xalign 0.5
        image "images/detective.png":
            xzoom 1.2
            yzoom 1.2

screen objects:
    modal True
    image "images/colors_dark.png"
    imagebutton:
        xalign 0.5
        ypos 0.5
        yanchor 0.5
        auto "brokenstool_%s.png"
        action [Hide("objects"), Hide("interrogation"), Jump("objects_stool")]
    frame:
        xalign 0.97
        yalign 0.0
        yoffset 30
        vbox:
            textbutton "return":
                text_size 39
                action Hide("objects")

screen specials:
    modal True
    image "images/colors_dark.png"
    vbox:
        xalign 0.30
        ypos 0.5
        yanchor 0.5
        spacing 65
        imagebutton:
            idle "images/side/side d.png"
            action NullAction()
        imagebutton:
            idle "images/side/side cc.png"
            action NullAction()
    vbox:
        xalign 0.70
        ypos 0.5
        yanchor 0.5
        spacing 65
        imagebutton:
            idle "images/side/side bb.png"
            action NullAction()
        imagebutton:
            idle "images/side/side gg.png"
            action [Hide("specials"), Hide("interrogation"),Jump("gg_special")]
    frame:
        xalign 0.97
        yalign 0.0
        yoffset 30
        vbox:
            textbutton "return":
                text_size 39
                action Hide("specials")    

screen bb_interrogation:
    hbox:
        xalign 0.5
        #yalign 0.04
        yalign 0.88
        spacing 270
        frame:
            textbutton "interrogate":
                action Jump ("interrogation_questions")
        frame:
            textbutton "people":
                action NullAction() #Jump ("interrogation_questions")
        frame:
            textbutton "objects":
                action NullAction() #Jump ("interrogation_questions")

    frame:
        #xalign 0.5
        xalign 0.97
        #yalign 0.0
        yoffset 30
        vbox:
            textbutton "leave":
                text_size 39
                action Jump("investigation_middle")        


### objects screens

screen car_door_wait:
    imagebutton:
        xanchor 2.0
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_left_%s.png"
        action Return() 

screen car_door:
    imagebutton:
        xanchor 2.0
        yanchor 0.5
        xpos 0.5
        ypos 0.85
        auto "gui/arrow_left_%s.png"
        action Jump("outside_intro") 

screen brokenstool:

    #$ broken_flag = True

    imagebutton:
        xpos 0.69
        yanchor -2.5
        auto "brokenstool_%s.png"
        #action NullAction()
        #action Call("broken_dialogue")
        #$ broken_flag = True
        action Jump("broken_dialogue")

screen idcards:
    imagebutton:
        xanchor 2.7
        yanchor 1.25
        xpos 0.5
        ypos 0.85
        auto "gui/testbutton_%s.png"
        action Jump("idcards_taken") 

screen deadbody:
    imagebutton:
        xalign 0.5
        yalign 0.5
        auto "gui/testbutton_%s.png"
        action Jump("deadbody") 

screen deadbody_close: 
    hbox:
        xalign 0.5
        yalign 0.5
        imagebutton:
            auto "gui/testbutton_%s.png"
            action Jump("deadbody_1")
        imagebutton:
            auto "gui/testbutton_%s.png"
            action Jump("deadbody_2") 
        imagebutton:
            auto "gui/testbutton_%s.png"
            action Jump("deadbody_purse") 

screen deadbody_purse:
    hbox:
        xalign 0.5
        yalign 0.5
        imagebutton:
            auto "gui/testbutton_%s.png"
            action NullAction()
        imagebutton:
            auto "gui/testbutton_%s.png"
            action NullAction()
        imagebutton:
            auto "gui/testbutton_%s.png"
            action Jump("deadbody_id") 
        imagebutton:
            auto "gui/testbutton_%s.png"
            action NullAction()
        


### characters screens

screen cat:
    imagebutton:  
        #focus_mask True 
        xanchor 0.5
        yanchor 1.5
        xpos 0.5
        ypos 0.85
        auto "images/cat_%s.png"
        action Hide("cat", transition=Dissolve(0.5))
        #Play("sound", "audio/bell.wav")

screen response1(who,what):
    style_prefix "say"
    window id "window":         
        has vbox
        #    spacing 10
        if who:
            text who id "who"
        text what id "what"

screen response:
    textbutton "here":
        xalign 0.5
        yalign 0.5
        #action Show("response1")
        action NullAction()

screen bm_sitting:

    imagebutton:
        xpos 0.6
        #yanchor -2.5
        idle "businessman1.png"
        #action NullAction()
        action Jump("business_dialogue")
    imagebutton:
        xpos 0.15
        #yanchor -2.5
        idle "businessman2.png"
        #action NullAction()
        action Jump("business_dialogue")

screen d_description:
    frame:
        yalign 0.0
        xalign 0.5
        yoffset 20
        xminimum 1000
        yminimum 70
        text "Hadn't noticed that guy sitting there before.":
            xalign 0.5
            yalign 0.7

screen detective_sitting:
    #image top_text = ParameterizedText (xalign=0.5, yalign=0.5)
    if ask_flag == True:
        imagebutton:
            yanchor -0.935
            auto "detective_sitting_small_%s.png"
            hovered Show ("d_description")
            unhovered Hide ("d_description")
            #Show (top_text "hello tere obi wan")
            action Jump("detective_intro")

    else:
        imagebutton:
            yanchor -0.935
            auto "detective_sitting_small_%s.png"
            hovered Show ("d_description")
            unhovered Hide ("d_description")
            #Show (top_text "hello tere obi wan")
            action NullAction()

screen detective_sat:
    imagebutton:
        xpos 0.2
        ypos 0.0
        idle "detective.png"
        action NullAction()

screen prettygirl_sitting:
    imagebutton:
        xpos 0.65
        yanchor -0.43
        auto "prettygirl_sitting_small_%s.png"
        #action Show("say", "jijij")
        action Jump("pg_dialogue")

screen gg_sitting:
    imagebutton:
        xpos 0.74
        yanchor -0.5
        auto "gg_%s.png"
        action Jump("gg_dialogue")

screen l_description:
    frame:
        yalign 0.0
        xalign 0.5
        yoffset 20
        xminimum 1000
        yminimum 70
        #I should ask the lady behind the bar
        text "Feels like the only option...":
            xalign 0.5
            yalign 0.7

screen old_lady:
    imagebutton:
        xalign 0.1
        idle "baristalady.png"
        hovered Show ("l_description")
        unhovered Hide ("l_description")
        action SetVariable("ask_flag",True), Jump("this_is_it")   
        #SetVariable("old_lady_flag",True), 
        #SetVariable("ask_flag",True),

screen l2_description:
    frame:
        yalign 0.0
        xalign 0.5
        yoffset 20
        xminimum 1000
        yminimum 70
        text "She said this is the place.":
            xalign 0.5
            yalign 0.7    

screen old_lady2:
    imagebutton:
        xalign 0.1
        idle "baristalady.png"
        hovered Show ("l2_description")
        unhovered Hide ("l2_description")
        action SetVariable("asked_flag", True), Jump("this_is_it_done") 

screen interrogation_bl:
    imagebutton:
        xalign -0.05
        idle "baristalady.png"
        action Jump ("interrogation_bl")
        
screen interrogation_cc:
    imagebutton:
        xalign 0.1
        idle "cutecook.png"
        action Jump ("interrogation_cc")

screen interrogation_gg:
    imagebutton:
        xalign 0.3
        idle "gentlegiant.png"
        action Jump ("interrogation_gg")

screen interrogation_bb:
    imagebutton:
        xalign 0.5
        idle "badboy.png"
        action Jump ("interrogation_bb")

screen interrogation_albino:
    imagebutton:
        xalign 0.65
        idle "businessman2.png" 
        action Jump ("interrogation_albino")

screen interrogation_braids:
    imagebutton:
        xalign 0.8
        idle "businessman1.png"
        action Jump ("interrogation_braids")
        #action SetVariable("ask_flag",True), Jump("this_is_it")   

screen interrogation_lbguy:
    imagebutton:
        xalign 0.95
        idle "lovebirdguy.png"
        action Jump ("interrogation_lbguy")

screen interrogation_lbgirl:
    imagebutton:
        xalign 1.08
        idle "lovebirdgirl.png"
        action Jump ("interrogation_lbgirl")

        


##################################################################3

label start:

    #### flag variables ###
    #$ broken_flag = False
    $ interrogation_flag = False 
    #$ b_dialogue = 0
    $ b_dialogue = False
    $ sitting_dialogue = False
    $ interrogation_continue = 0
    $ walkback_flag = False
    $ novel_ending = False
    $ novel_what = False
    $ novel_like = False

    ### map variables ###
    #$ entrance_scene = 0
    $ entrance_scene = False
    $ entrance_scene_dialogue = False
    $ click_flag = 0
    $ cat_flag = False
    $ outsidecar_flag = 0
    $ ask_flag = False
    $ asked_flag = False
    $ freedom_flag = False

    ### point variables ###
    $ d_attraction_points = 0
    $ gg_attraction_points = 0
    $ bb_attraction_points = 0
    $ cc_attraction_points = 0
    $ albino_attraction_points = 0    
    $ braids_attraction_points = 0
    $ lbguy_affection_points = 0
    $ lbgirl_affection_points = 0
    $ lb_affection_points = 0

    ### story variables ###
    $ dd_closed = False
    $ bb_closed = False
    $ cc_closed = False
    $ gg_closed = False
    $ albino_closed = False
    $ braids_closed = False
    $ lbguy_closed = False
    $ bl_closed = False
    $ lbgirl_closed = False

    ### interrogation variables ###
    $ where_bb = False
    $ unusual_bb = False
    $ butt_bb = False
    $ know_bb = False

    ### notebook variables ###

    $ objects_notebook = False
    $ info_notebook = False
    $ clues_notebook = False

    ### info variables ###
    $ cc_dream_info = False
    $ bm_meeting_info = False
    $ d_fear = False
    $ d_fear_revealed = False
    $ bb_interests = False

    ### name variable ###
    $ name = "Max"
    $ cc_name = False
    $ bb_name = False
    $ gg_name = False
    $ pg_name = False
    $ bl_name = False
    $ dd_name = False
    $ bm1_name = False
    $ bm2_name = False
    $ lbguy_name = False
    $ lbgirl_name = False

    ### age variable ###
    $ cc_age = False
    $ bb_age = False
    $ gg_age = False
    $ pg_age = False
    $ bl_age = False
    $ dd_age = False
    $ bm1_age = False
    $ bm2_age = False
    $ lbguy_age = False
    $ lbgirl_age = False

    #### object variables ###
    $ cat_object = False
    $ businesscard = False

    ### ending variables ###
    $ persistent.rudeending = False
    #$ old_lady_flag = False
    
    
    scene diner_lowangle_bg
    show screen mask
    with fade

    show screen qmenu_button
    show screen notebook_button    

    #show player at textbox

    smc "{b}Coffee Date Murders{/b} {p}-a Murder Mystery Otome game-"

    #show screen test

    #smc "Jump to end?"

    #hide screen test

    hide screen notebook_button   

label road:

    play music "audio/maintune_happy2.wav" fadein 8.0 #volume 0.6

    scene road

    #"screen car_inside"

    hide screen mask

    with fade
    
    #play sound

    #image top_text = ParameterizedText (xalign=0.5, yalign=0.5)

    #show top_text "a bargain or somtin"

    smcs "What am I doing here again?"

    e "You're on a writer's retreat."

    smcs "Right, {w}but why am I driving to the middle of nowhere?"

    e "My husband recommended it."
    
    e "Before moving to the city, he'd go to that diner to disconnect and he would suddenly be inspired with new ideas."
    
    smcs "And by \"disconnect\" you mean that no type of cell signal reaches the place."
    
    e "And so, you will be doing the same." 

    smcs "What if something happens to me? {w}I won't be able to reach you.{p}Will you be able to handle the shock? {w}{b}Think about your baby!{/b}"

    e "I'm your editor, not your bodyguard. If something happens to you I'll probably sell more books, so get on with it."

    smcs "But-" with hpunch 

    #glitches/signal lost

    smcs "Hello? Miriam?"
    
    "....................................................................................."

    smcs "Yep, {w}signal's lost.{w} Looks like I've entered the dead zone."

    smcs "I'm glad her husband stopped her from coming with me.{p}She's due in a few weeks for her first child..."
    
    smcs "{cps=150}...or am I her first child? {w=0.6}{cps=70}With the way she scolds me for not writing all my abc's...{/cps}"

    smcs "If she wasn't 8 months pregnant she would've {b}definitely{/b} followed me. {w}Honestly, I decided to take this this trip to {b}escape{/b} from her."
    
    smcs "{cps=50}Mark my words, {w}{cps=350}that woman wants to squeeze another prize-winning story out of me with her own two hands,{w} around my neck.{/cps}"

    smcs "..."

    smcs "haaaa...{p}I hope I can write something good soon..."

    scene diner_road

    smcs "Ah! {w}That must be the place!"

    smcs "Or... {w} is it? {p}The sign says \"Cafe\", but it looks like the diner in the picture."

    #call screen diner_picture

    smcs "I'm sure Cafe and Diner are different things.{p}Might as well stop here and ask."

label parked:

    scene parked

    #screen car_inside

    #smcs"Alright, lets go."

    call screen car_door_wait

    smcs"Wait! {w}{b}Can't leave my writing journal!{/b}{p}{cps=350}Pretty sure Miriam would murder me if I did.{/cps}" with vpunch

    smc "{cps=70}But,{/cps}{w=0.5} {cps=60}where did I put it{/cps}?"

    call screen notebook_object

label name:

    smcs "{cps=150}Brand new{/cps}{w=0.3}{cps=30}... from my grandma's attic.{/cps}{p}Don't you just love the smell of old books?"

    smcs "{cps=150}And I can write{/cps} {w=0.3}{cps=20}{b}anything{/b}{/cps}{w=0.5} in this bad boy{w=1.0}{cps=40}- or girl?{/cps} {p=0.8}{cps=80}I feel like journals are girls.{/cps}"

    smcs "I should probably start by writing my name here." #on this
    
    call screen notebook_intro

label named:

    $ name = name.strip()

    show screen notebook_people_intro #maybe make it so that you can skip it with the space bar or smthng

    smcs "After all, we're protagonists of our own story."

    show screen notebook_button with dissolve

    smcs "Now, let's get out of here."

    #stop music fadeout 3.0
    
    call screen car_door

label outside_intro:

    play music "audio/maintune_og2.wav" if_changed fadein 0.5 volume 1.1 

    #play music "audio/maintune_og2.wav" fadein 0.5 volume 1.1

    scene parkinglot
    
    hide screen cat

    with fade

    if outsidecar_flag == 0:

        smc "Alright."

    else:

        pass

    #play music "audio/maintune_og2.wav" if_changed fadein 0.5 volume 1.1 

    $ outsidecar_flag += 1

    call screen parkinglot_intro

label cars:

    hide screen cat

    with fade

    call screen cars

label trash:

    #$ cat_flag += 1

    if cat_flag == False and cat_object == False:

        show screen cat

        with fade

        $ cat_flag = True
    
    else:

        $ cat_flag = True

        pass

        with fade

    call screen trash

label diner_back:

    scene diner_back

    if cat_flag == True and cat_object == False:

        show screen cat

        with fade
    
    else:

        $ cat_flag = False

        pass

        with fade

    #$ cat_flag += 1

    $ cat_flag = False

    call screen diner_back

label entrance:

    #stop music

    play music "audio/maintune_og2.wav" if_changed fadein 2.0

    $ sitting_dialogue = False

    #show screen old_lady

    #hide screen mask

    #$ entrance_scene += 1

    if entrance_scene == False:
        pass
    if entrance_scene == True and entrance_scene_dialogue == False:
        smc "Round and round we go."
        $ entrance_scene_dialogue = True
    else:
        pass

    if asked_flag == True:
        hide screen detective_sitting

        hide screen prettygirl_sitting

        hide screen detective_sat

        hide screen gg_sitting

        hide screen brokenstool

        scene entrance_bg

    else:
   
        hide screen detective_sitting

        hide screen prettygirl_sitting

        hide screen detective_sat

        hide screen gg_sitting

        hide screen brokenstool

        scene entrance_bg
        with fade

    #show screen response

    if ask_flag == False:

        show screen old_lady
        
        smcs "There should be someone I can ask here."

        call screen old_lady

    else:

        show screen old_lady2
        
        call screen middle1

    #if old_lady_flag == True:

    #    sbl "I don't know."

    #    $ old_lady_flag = False

    #else:
    #    pass


label this_is_it:

    hide screen old_lady

    hide screen old_lady2

    hide screen l_description

    hide screen l2_description

    scene the_bar

    show baristalady

    with fade

    $ evening_bl = True
    $ weather_bl = True
    $ how_old = False

label is_it:

    menu:

        "Good evening ma'am!" if evening_bl:

            $ evening_bl = False
            
            sbl "Aweful chirpy, aint you, love?"

            smcs "I try to be!"

            $ lb_affection_points += 1

            jump is_it

        "Awful weather isn't it?" if weather_bl:

            $ weather_bl = False

            sbl "Say less! My bones are creaking."

            $ lb_affection_points += 1

            jump is_it
        
        "Hello, may I ask if this is the diner from this brochure?" if evening_bl and weather_bl:

            #call screen diner_picture

            sbl "Oh, yes it is. {w}Well... Not anymore."

            sbl "We're a Cafe now."

            jump why

        "May I ask if this is the diner from this brochure?" if evening_bl == False or weather_bl == False:

            #call screen diner_picture

            sbl "Oh, yes it is. {w}Well... Not anymore."

            sbl "We're a Cafe now."

            jump why

    label why:

        menu:
            
            "Ok! Thanks!":

                jump this_is_it_done

            "Alright, thank you.":

                jump this_is_it_done

            "How so?" if how_old == False:

                $ how_old = True
                
                sbl "It was my son's idea, such a darling, {w}he wanted to go to all the way to the city to open up a Cafe."
                
                sbl "{cps=90}{size=+5}But we mom's know what's best for our little ones!{/size}{/cps}"

                sbl "I convinced him to stay here and give this old place a make over!{p}So we're currently under reconstruction."
                
                $ cc_dream_info = True

                jump why

            "...how old is your son?" if how_old:

                sbl "21{w},  why do you ask?"

                $ cc_age = True

                jump toxic          
    
    label toxic:

        menu:

            "Maybe it's time you let him spread his wings.":

                $ lb_affection_points -= 2

                sbl "{cps= 200}{b}Awful rude you are.{/b}{/cps}{p=0.3}{cps= 90}You know nothing about me or my son to be saying such things!{/cps}{w=2.0}{nw}"

                sbl "{cps= 50}I don't want you in my diner{/cps}{nw}"

                sbl "{s}I don't want you in my diner{/s}{cps= 90}- {p=0.2}{b}I mean {size=+10}{w=0.5}{space=10}our Cafe{space=10}{/size}{w=0.5} for any longer!{/b}{/cps}{w=1.0}{nw}" 
                
                sbl "{size=+5}{k=+10}{b}You know the way out.{/b}{/k}{/size}"

                #sbl "{cps= 90}I mean Cafe,{/cps} you know the way out."

                $ persistent.rudeending = True

                jump rude_ending

            "You just don't look your age ma'am!":

                $ lb_affection_points += 2

                sbl "{size=+8}{k=+5}Oh you flatterer!{/k}{/size}"

                jump this_is_it_done
            
            "No reason.":

                sbl "Well, then."

                jump this_is_it_done

    label this_is_it_done:

        if lb_affection_points == 0:
            
            sbl "Sit wherever you like.{p}I'll get to you in a moment."

        else:
            
            sbl "Sit wherever you like, sweatheart.{p}I'll get to you in a moment."

    $ bl_name = True

    jump entrance

label middle1:

    $ entrance_scene = True
    $ asked_flag = False

    hide screen old_lady

    hide screen old_lady2

    #if b_dialogue >= 0:
    if b_dialogue:

        scene entrance_middle_bg

    else:

        scene entrance_middle_bg

        with fade

    show screen bm_sitting

    call screen middle2


    label business_dialogue:

        #$ b_dialogue += 1

        hide screen bm_sitting

        show businessman2 at slightleft

        show businessman1  at slightright

        sbm2 "This is an important business meeting."

        $ bm_meeting_info = True

        sbm1 "We would like some privacy."

        if b_dialogue == True:
            pass
        
        else:
            smc "Why would you have a business meeting in a public cafe?"
            
            $ b_dialogue = True

        jump middle1

label middle2:

    #$ b_dialogue -= 1
    $ b_dialogue = False

    scene exit_middle_bg 

    hide screen bm_sitting

    with fade
    
    if walkback_flag:
        pass
    else:
        smc "A 180 and a walk back..."

    call screen exit

label hallway_intro:

    scene hallway_intro 

    hide screen bm_sitting

    hide screen cat

    hide screen trash

    with fade

    call screen hallway_intro

label kitchen:

    scene kitchen with fade

    call screen kitchen

label restroom:

    scene restroom with fade

    call screen restroom

label exit:

    $ walkback_flag = True

    if sitting_dialogue:

        scene exit_bg

    else:

        scene exit_bg
        with fade 

    show screen detective_sitting

    show screen prettygirl_sitting

    show screen brokenstool

    show screen gg_sitting

    if click_flag == 0:

        smc "Hadn't noticed that guy sitting there before."  
    else:
        pass

    call screen entrance

    label broken_dialogue:

        scene exit_bg

        $ sitting_dialogue = True
        $ click_flag += 1

        show screen brokenstool

        sbl "Sorry, hun, that stool is broken."
        
        smc "Noted."

        jump exit

    label pg_dialogue:

        scene exit_bg

        $ sitting_dialogue = True
        $ click_flag += 1
        #$ click_flag = True
        show screen prettygirl_sitting

        spg  "..."

        smc  "Whats her deal?"

        jump exit


    label gg_dialogue:

        scene exit_bg

        $ sitting_dialogue = True
        $ click_flag += 1
        #$ click_flag = True

        show screen gg_sitting

        smc "I do not want to sit beside him. he makes me uncomfortable."

        jump exit

label detective_intro: 

    $ click_flag += 1
    #$ click_flag = True

    hide screen detective_sitting

    hide screen prettygirl_sitting

    hide screen detective_sat

    hide screen brokenstool

    hide screen gg_sitting   

    hide screen interrogation_leave

    #hide screen notebook_button

    hide screen d_description

    #show screen interrogation_button

    scene detective_seat

    show detective at sitting
    
    with fade

    smc "Another booth, another probable rejection..."
    
    menu:

        smc "Another booth, another probable rejection..."

        "Mind if I sit with you?":
            
            d "Not at all, make yourself comfortable."

        "Is this side available?":

            d "It is, make yourself comfortable."

    label detective_done:
        
        #show screen interrogation_button

    smcs "Thank you!"

    d "Of course."

    ## should have screen to click on book and comic-like scenes that show a close up so she can realize it's her book.

    smc "!!!"

    smc "He's holding my novel!"

    smc "Should I say something?"

    $ novel_quiet = True 
    $ novel_stare = True

    label say_something:

        menu:

            "What are you reading?":    

                $ d_attraction_points += 1

                d "This?{w} Glad you asked!"

                d "The novel's titled -Atonement of the Moon-.{p}It's the best mystery I've ever read."

                d "My brother bought it for me five years ago, and I have brought it with me on every long trip since then."
                
                d "Supposedly the author was in highschool when she wrote this,{p}and had plans of joining the police force right after."

                d "But aside from that, there is nothing much known about her.{p}The novel doesn't even have her portrait."
                
                d "The name's probably an allias too. Written by \"L. Roberts\"."

                smc "{cps=90}\"Lucky\", {w=0.2}it's my middle name.{/cps} {w}[name] L. Roberts.{p}{b}I hate it,{/b} but I feel it suits me."

                jump novel_ask  

            "(Keep quiet.)" if novel_quiet:

                $ novel_quiet = False 

                smc "Better not..."

                jump storm

            "(Keep quiet.)" if novel_quiet == False:

                d "{cps=20}...alright...{/cps}"

                $ d_attraction_points -= 2

                jump storm
            
            "(Stare.)" if novel_stare:

                $ novel_stare = False
                $ novel_quiet = False 

                d "..." 
            
                d "Is something the matter?"

                jump say_something

    label novel_ask:

        $ novel_what = True
        $ novel_like = True
        $ novel_ending = True

    label novel_questions:

        menu:
            
            "What is the novel about?" if novel_what:

                $ novel_what = False

                d "Four friends in a small countryside town find a dead stranger in an abandoned barn."
            
                d "They go around interrogating their neighbors, while trying not to let on that they know about the murder."

                jump novel_questions

            "What did you like about it?" if novel_like:

                $ novel_like = False

                d "That it's not really about the mystery, {w}it's about the relationships between the characters."

                d "{cps=100}And you'd never guess who the culpri{/cps}—{w=0.5} ah,{w=0.2} {cps=100}sorry. {w=2}Spoilers.{/cps}"

                jump novel_questions

            "What did you think of the ending?" if novel_ending:

                $ novel_ending = False

                d "I didn't really expect it, {w}but all the clues where there.{p}I'm really looking forward to her next work."

                smc "{cps=40}...{w}we all are.{/cps}"

                d "I guess she must be a cop by now or maybe a full fledged detective."

                smcs "She isn't."

                if d_attraction_points >= 1:

                    d "Sorry?"
                
                else:

                    d "Pardon?"

                smc "Oh no! Did I say that out loud?{p}{cps=150}This is what happens when you have an internal monologue!{/cps}" with hpunch

                #smc "This is what happens when you have an internal monologue in your head!"

                smcs "Um..."

                jump novel_ending

        label novel_ending:

            menu:

                "Tell him.":

                    smcs "She didn't pass the final exam. Health problems, or such." ###I feel like changing this, sounds dumb.

                    jump tell_him

                "Don't tell him.":

                    smcs "She wrote a hit novel in her teens.{p}Why would she risk a career as an award-winning author?"

                    d "Maybe so."

                    jump dont_tell_him 
        
        label tell_him:
            
            d "Hmm...{w} You seem to know more than you let on, {w=0.7}{cps=150}could it be...{/cps}"

            smc "He can't possibly guess it, right?"

            d "{w=0.3}{cps=130}Are you actually a fan of the author?{/cps}" #with vpunch 

            smc "{cps=50}Phew!{/cps}"

            menu:
                    
                "\"Fan\" isn't the word I would use.":

                    $ d_attraction_points -= 1

                    d "{cps=20}I see... {w=0.6}Then?{/cps}"

                    smcs "I'm-"
                    
                    #I hope my recommendation is sufficient for you to give it a read someday.

                    jump storm

                "Actually, yes.":

                    $ d_attraction_points += 2

                    d "Fantastic! {w}A pleasure meeting you." 

                    smcs "Likewise. {w}I'm-"

                    jump storm                    

                "I just wanted to get to know you.":

                    #probs change this option

                    $ d_attraction_points += 1

                    d "Oh! {w}I see..." #blushing or happy

                    jump storm



    #call screen interrogation_button

#label novel:

label detective_after:
    
    scene detective_seat

    show screen notebook_button  
    #show screen test 

    show detective at sitting


    d "That was wild."

    smcs "Sure was."

    jump storm 

label interrogation:

    hide screen notebook_button  
    #hide screen test 

    $ interrogation_flag = True
    $ interrogation_continue += 1

    if interrogation_continue == 1:

        scene colors_dark

        hide screen interrogation_return
        show screen interrogation_leave

        show detective at sitting

        #hide screen test
     
        with dissolve

        show detective at center with move:
            xzoom 1.2
            yzoom 1.2

        hide screen interrogation_button

        hide screen interrogation_return
        
        call screen interrogation

        hide screen interrogation

        scene diner_lowangle_bg

        hide screen detective_sat

    else:

        scene colors_dark

        hide screen interrogation_return
        show screen interrogation_leave

        show detective at center:
            xzoom 1.2
            yzoom 1.2

        call screen interrogation

        hide screen interrogation

        scene diner_lowangle_bg

        hide screen detective_sat

label people:
    label people_mc:

        scene colors_dark

        hide screen notebook_button  
        #hide screen test 
        
        show detective at center:
            xzoom 1.2
            yzoom 1.2
        

        if d_attraction_points >= 1:

            d "I think you are pretty."

            smcs "You dont look half bad yourself."

        else:

            d "You seem nice."

            smcs "Thank you!"

        call screen interrogation

label objects:

    label objects_stool:

        scene colors_dark

        hide screen notebook_button  
        #hide screen test 
    
        show detective at center:
            xzoom 1.2
            yzoom 1.2

        #with dissolve

        d "It is broken."

        smc "...right."

        call screen interrogation

label d_questions:

    #hide screen interrogation_leave

    #show screen interrogation_return

    #scene colors_dark
    
    #show detective at center:
    #    xzoom 1.2
    #    yzoom 1.2

    #menu: 

    #    "Do you like me?":
        
    #        jump d_affection

    #    "Do I like you?":
        
    #        jump d_interest

    label d_affection:

        scene colors_dark

        hide screen notebook_button  
        #hide screen test 
    
        show detective at center:
            xzoom 1.2
            yzoom 1.2

        if d_attraction_points >= 1:
    
            d "I do."

            smc "Sweet!"

        else:

            d "Sure."

            smcs "Thanks!"

        jump d_done 
    
    label d_interest:

        hide screen notebook_button  
        #hide screen test 

        scene colors_dark
    
        show detective at center:
            xzoom 1.2
            yzoom 1.2
    
        d "I hope you do."

        if d_attraction_points >= 1:

            smcs "I might..."
        
        else:

            smcs "Sure."
    
        jump d_done

    label d_done:   

        call screen interrogation

label gg_special:

    #scene colors_dark

    hide screen notebook_button  
    #hide screen test 
    
    #scene entrance_bg

    scene colors_dark

    with hpunch
    #with flash

    show gentlegiant at center with moveinleft:
        xzoom 1.6
        yzoom 1.6
        ypos 1.4

    #with vpunch
    #with hpunch
    #with flash
    #with vpunch

    with ease 

    #show gentlegiant at quip:
    #    xzoom 1.6
    #    yzoom 1.6
    #    ypos 1.4

    #with ease 

    #g "hmm..."

    hide gentlegiant with moveoutright

    with vpunch
    #with flash

    show detective at tremblecenter:
        xzoom 1.0
        yzoom 1.0

    d "..."

    #show detective at center:
    #    xzoom 1.2
    #    yzoom 1.2

    d "Intimidation?"

    smcs "Yep."

    call screen interrogation

label storm:

    #music change

    scene blackout

    hide detective at sitting

    with flash     

    stop music

    play sound click #should be thunder sound

    #blackout
    #scene of him holding her hand
    #scene of outside the diner in darkness
    #scream
    #thud
    #grunt

    "!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!" with hpunch

    u "{cps=150}Remain calm everyone.{p}The backup generator will start up in a few seconds.{/cps}"

label murder1:

    scene entrance_bg

    "" #pretty girl murdered

    u "{b}AHHHHHHHHHHHHHHHHHHHHHHH!!!{/b}" with vpunch

    u "{b}How did this happen??{/b}" with vpunch

    u "{b}Who did this??{/b}" with vpunch

    u "{b}Someone call the police!!{/b}" with vpunch

    # it'd be pretty cool if the text got bigger and bigger with each scream

    sd "Everyone stay right where you are!" with hpunch

    #cooler animation or smtin is in order up here

    scene diner_lowangle_bg

    with fade

    ""

    sd "..."

    # he goes to the body and takes pulse

    #sbl "What is going on here?"

    scene exit_bg

    hide detective

    show detective

    with fade

    $ dd_name = True
    $ d_fear = False #take out later

    d "I'm detective Jay Wallace from the state's federal bureu.{p}Everyone here is under investigation from this moment on."

    # show cop id
    
    d "There's no cell reception here, so I will ask all of you to remain seated, until further notice."

    scene entrance_middle_bg

    show lovebirdgirl
    show lovebirdguy at slightleft 

    lbgirl "What do you mean remain seated???{p}My boyfriend has blood splattered all over his clothes!!" with hpunch

    #show lovebirdguy at center 
    #show lovebirdgirl at slightright 

    #with ease
    
    #lbguy "I'd like to at least wash up, please."

    hide lovebirdgirl
    hide lovebirdguy
    show baristalady

    bl "Such a young life taken so soon...{p}I need to sit down." with hpunch

    hide baristalady
    show businessman2

    bm2 "Ugh, this is terrifying,{p}I don't want to be anywhere near a corpse." with hpunch

    hide businessman2 
    show businessman1 at newcenter

    bm1 "It's certainly difficult to be in the same place of a dead body.{p}More so when the murderer is in the room with us." with hpunch
    ## idk if to change the second part of this dialogue, it sounds odd and unnecessary.
    hide businessman1
    show cutecook

    cc "This is no good for business...{p}Can I at least mop up?" with hpunch  

    hide cutecook
    show badboy

    bb "{b}I swear it wasn't me!{/b}{p}What kind of sick person would do something like this???" with hpunch   

    hide badboy
    show gentlegiant

    gg "{w}................................................................................................" with hpunch
    #gg "She was alive just moments before...{p}....................................." with hpunch

    scene exit_bg

    hide gentlegiant 
    show player

    with fade

    mc "...{w}{cps=50}I don't know what to say.{/cps}"

    show player at completeleft with ease
    show detective 

    d "Everyone place their identifications and car keys on the table.{p}No one will leave any time soon."

    menu:

        "Put them on the table.":
            #animate everyone's ids and cards on table
            pass
        
label ids:

    scene entrance_bg with fade

    #animate detective taking mc's id

    sd "..."

    scene exit_bg
    show detective
    with fade

    d "May I talk to you for a moment?"

    menu:

        "Of course...":

            jump author

        "I didn't do it.":

            d "I believe you,{w} come with me."

            jump author

label author:

    scene detective_seat

    show detective at sitting
    
    with fade

    d "So...{p}[name] L. Roberts?"

    smcs "{cps=50}...{w}yes.{/cps}"

    d "Any relation to the author?"

    smcs "{cps=50}...{w}{/cps}"

    menu:

        smcs "..."

        "I am her.":
            pass
        
        "She is me.":
            pass

    #smcs "Yes,{w} I'm the author of Atonement of th Moon."

    d "Anyway to prove it?"

    $ objects_notebook = True
    $ businesscard = True

    smc "...{w}{cps=150}I'm sure I left my business card between the pages of my journal...{/cps}"

    hide screen notebook_button
    call screen notebook_button

label businesscard:

    hide screen notebook_button
    # animation?
    show screen notebook_button

    $ d_attraction_points += 5

    d "...{p}{cps=150}So its true...{w} {cps=80}Miss Roberts, {w=0.5}I have a favor to ask of you.{/cps}"

    d "I have mustered enough bravado to control the situation,{p}but the truth is I'm in the lasts of my strenghts."

    menu:

        "What do you mean?":
            pass

    d "I-"

    show detective at sitting with flash

    # animation of him scared

    $ d_fear = True

    d "...{p}As you can see,{w} I don't do well with thunderstorms."

    $ fear_how = True

label fears:

    menu:

        "What does that have to do with me?":
            $ d_attraction_points -= 3
            d "{cps=10}...{w=0.5}{cps=100}they do say never to meet your heroes..{/cps}."
            jump detective
        
        "What can I do to help?":
            jump detective
                
        "May I ask, how that happened?" if fear_how:

            $ fear_how = False

            if d_attraction_points >= 8:
                $ d_fear_revealed = True
                d "It's an old wound from my childhood,{w} of no importance at the moment."
                jump fears

            else:
                $ d_fear_revealed = False #delete later
                d "It's of no importance at the moment."
                jump fears
    
    label detective:

        d "I need you to investigate this case in my place."

        smcs "{b}What???{/b}" with hpunch

        d "{cps=150}A small diner, {w}one quick murder,{w} 8 suspects,{w} no cell reception.{/cps}"
        
        d "{cps=200}If there's anyone that kind find the truth, it's the mystery novelist with police training and a background in criminal studies.{/cps}"

        menu:

            "How do you know I'm not the murderer?":

                pass

            "Alright, leave it to me.":

                d "My thanks, {w}and my apologies for relaying my responsabilities on to you."

                d "Please take a look at the id cards on the table to help identify everyone."

                call screen leave_detective

        d "We were both seated the farthest from where the incident took place, time-wise it would have taken you a longer time to stand up,"
        
        d "stab the victim, and sit back down, than the amount of time the lights were out.{w} {b}{cps=150}Plus I was holding your hand the entire time.{/cps}{/b}"

        d "I also heard you asking the ma'am if this was the establishment you were looking for,{w} you weren't even sure where you were."

        d "While neither you nor the victim seemed to recognized or acknowledged each other in anyway."

        d "This was more planned than that. {p}Crimes of passion rarely ever have such precise timing."

        d "And-"

        d "Whoa!" with flash #maybe so maybe not

        #animation?

        d "{w=0.5}{cps=80}...sorry about that{cps=8}...{/cps}"

        menu:

            "Alright, leave it to me.":

                d "My thanks, {w}and my apologies for relaying my responsabilities on to you."

                d "Please take a look at the id cards on the table to help identify everyone."

                call screen leave_detective

label idcards_take:

    scene entrance_bg
    hide detective
    with fade

    smc "Idcards..."

    call screen idcards #these should open up and show the cards
    
label idcards_taken:

    $ cc_name = True
    $ bb_name = True
    $ gg_name = True
    $ bl_name = True
    $ dd_name = True
    $ bm1_name = True
    $ bm2_name = True
    $ lbguy_name = True
    $ lbgirl_name = True
    $ cc_age = True
    $ bb_age = True
    $ gg_age = True
    $ bl_age = True
    $ bm1_age = True
    $ bm2_age = True
    $ lbguy_age = True
    $ lbgirl_age = True

    smc "Alright let me write those down{cps=10}...{/cps}"
    smc "{cps=30}Hmm,{w} {cps=150}I'm missing {b}one{/b} person{w}:{/cps}{/cps} the victim.{p}I should discuss this with detective Wallace." 

    call screen go_detective with flash

label identify_body: 

    scene detective_seat

    show detective at sitting
        
    with fade

    smcs "Problem.{w} {cps=350}We're missing the victim's id.{/cps}"

    d "{w}You'll have to search the body."
        
    d "I would do it myself,{w} {cps=180}but I think my legs gave out with that last lightning...{/cps}"

    menu:
            
        "I don't think I'm qualified for this.":

            d "You know criminal science, and went through police training.{p}You can do this."

            smcs "Are you sure you're not biased towards me since I'm your favorite author?"

            d "{cps=10}...{/cps}{w}{cps=200}I have the right to remain silent.{/cps}" #laughs

            $ d_attraction_points += 2

            call screen leave_detective_2

        "Got it.":

            call screen leave_detective_2
        
label identify_body_2:

    scene entrance_bg
    hide detective
    with fade

    smcs "I'm so not ready for this."

    call screen deadbody

label deadbody:

    scene diner_lowangle_bg
    with fade

label deadbody_close:
    
    call screen deadbody_close

label deadbody_1:

    smc "Not here"

    jump deadbody_close

label deadbody_2:

    smc "Not this."

    jump deadbody_close

label deadbody_purse:

    scene entrance_bg
    hide detective
    with fade

    smc "{cps=100}Wonderful!{w}{/cps} I had always wanted to search through a dead person's belongings{cps=8}...{/cps}"
    
    #smc "{cps=28}Sorry,{w} {cps=150}they do say sarcasm is a trauma response...{/cps}" 

    call screen deadbody_purse

label deadbody_id:

    $ pg_name = True
    $ pg_age = True

    smc "Got it!"

    #this should automatically open her description page

    smc "I'd had thought she was older, but she was so young{cps=8}...{/cps}"

    smc "What should I do now?"

    call screen middle1

label deadbody_3:
    scene detective_seat

    show detective at sitting
        
    with fade

    smcs "..."

    menu:
        
        "What now?":
            d "You'll have to investigate by yourself.{p=0}I can't help you anynmore."
            d "Ask questions.{w} Look for evidence.{p}You have all the authority now."
            #d "You have all the authority now."
            call screen leave_detective_3

        "I'll leave.":
            jump investigation_starts

label investigation_starts:

    scene entrance_bg
    hide detective
    with fade

    call screen middle1

label investigation_middle:

    scene entrance_middle_bg

    show screen notebook_button

    show screen interrogation_gg
    show screen interrogation_bb
    show screen interrogation_cc
    show screen interrogation_albino
    show screen interrogation_braids
    show screen interrogation_bl
    show screen interrogation_lbguy
    show screen interrogation_lbgirl

    with fade

    $ gg_attraction_points = 0
    $ bb_attraction_points = 0
    $ cc_attraction_points = 0
    $ albino_attraction_points = 0    
    $ braids_attraction_points = 0
    $ lbguy_affection_points = 0
    $ lbgirl_affection_points = 0

    $ dd_closed = False
    ## delete all later ##

    call screen middle2

label interrogation_gg:
    scene detective_seat

    hide screen interrogation_gg
    hide screen interrogation_bb
    hide screen interrogation_cc
    hide screen interrogation_albino
    hide screen interrogation_braids
    hide screen interrogation_bl
    hide screen interrogation_lbguy
    hide screen interrogation_lbgirl

    show gentlegiant
    
    with fade

    
    if gg_closed:
        gg "(angry)......"
        jump investigation_middle

    else:
        gg "{cps=50}.........................................................................................................{/cps}"

    $ gg_closed = False

    jump investigation_middle

label interrogation_bb:
    scene detective_seat

    hide screen interrogation_gg
    hide screen interrogation_bb
    hide screen interrogation_cc
    hide screen interrogation_albino
    hide screen interrogation_braids
    hide screen interrogation_bl
    hide screen interrogation_lbguy
    hide screen interrogation_lbgirl
    
    show badboy

    with fade

    $ where_bb = True
    $ unusual_bb = False
    $ butt_bb = True
    $ know_bb = True
    $ understanding_bb = False
    $ bb_interests = False

    if bb_closed == True:

        bb "Get out of my face."
        jump investigation_middle
    else:
        bb "{b}What do you want?{/b}"

    $ bb_closed = False

    hide screen notebook_button

label interrogation_bb_screen:

    call screen bb_interrogation

label interrogation_questions:

    menu:

        "Where were you when the incident happened?" if where_bb:
            $ where_bb = False
            $ unusual_bb = True
            jump where_bb

        "Did you see anything out of the usual?" if unusual_bb:
            $ unusual_bb = False
            jump unusual_bb
                
        "What's up your butt?" if butt_bb == True and understanding_bb == False :
            $ butt_bb = False
            jump butt_bb

        "I want to get to know you better." if know_bb:
            $ know_bb = False
            jump know_bb  

        "Nevermind." if understanding_bb == False:
            jump interrogation_bb_screen

        "Thank you for your cooperation." if understanding_bb:
            bb "Well, it was alright."
            jump interrogation_bb_screen

    #jump interrogation_bb

    label where_bb:

        bb "Didn't you see me?{w} {cps=150}I was sitting right in this booth.{/cps}"

        jump interrogation_questions

    label unusual_bb:

        if bm_meeting_info == True and understanding_bb == False:
            bb "{cps=120}Aside from you asking everyone for a seat?{/cps}{p}No.{w=0.4} {cps=60}I wasn't really paying attention.{/cps}"
        elif understanding_bb:
            bb "Just normal people in a cafe doing normal cafe people things."
        else:
            bb "Not really.{w} {cps=150}Wasn't really paying attention.{/cps}"

        jump interrogation_questions

    label butt_bb: 

        $ bb_attraction_points -= 1

        bb "Nothing, what's up yours?"

        smc "It's like talking to a child..."

        smcs "{cps=150}...forget it.{/cps}"

        jump interrogation_questions

    ### use later in the game ###
    label know_bb:

        bb "For better interrogation?"

        menu:
                
            "Of course.":

                $ bb_attraction_points -= 2
                
                bb "Get out of my face."

                $ bb_closed = True

                jump investigation_middle

            "To understand you better.":

                $ understanding_bb = True

                $ bb_attraction_points += 2

                bb "{cps=20}Hmmmm...{/cps}" 

                bb "I like music?"

                smcs "What kind?"

                bb "Classical."

                smc "That's unexpected."

                bb "I know what you might be thinking:{p}I'd look out of place in a concert hall,{w} but music doesn't discriminate."

                bb "Many composers were the punks of their time,{w} the same could be said for Shakespeare, Dostoevsky and other authors."

                smcs "So you also like literature?"

                bb "Yes!{w} Once you read a good book, it stays with you forever."

                smcs "I agree!"

                $ bb_interests = True

                jump interrogation_questions

    #jump interrogation_bb_screen   

label interrogation_cc:
    scene detective_seat

    hide screen interrogation_gg
    hide screen interrogation_bb
    hide screen interrogation_cc
    hide screen interrogation_albino
    hide screen interrogation_braids
    hide screen interrogation_bl
    hide screen interrogation_lbguy
    hide screen interrogation_lbgirl

    show cutecook

    with fade

    if cc_closed:
   
        cc "Leave me alone."
        jump investigation_middle

    else:

        cc "This is bad for business..."
    
    $ cc_closed = False

    jump investigation_middle

label interrogation_albino:
    scene detective_seat

    hide screen interrogation_gg
    hide screen interrogation_bb
    hide screen interrogation_cc
    hide screen interrogation_albino
    hide screen interrogation_braids
    hide screen interrogation_bl
    hide screen interrogation_lbguy
    hide screen interrogation_lbgirl

    show businessman2

    with fade

    if albino_closed:
        bm2 "I'll sue you when I get out of here."
    
    else:
        bm2 "The moment I get out of here I'm suing all of you."
    
    $ albino_closed = False

    jump investigation_middle

label interrogation_braids:
    scene detective_seat

    hide screen interrogation_gg
    hide screen interrogation_bb
    hide screen interrogation_cc
    hide screen interrogation_albino
    hide screen interrogation_braids
    hide screen interrogation_bl
    hide screen interrogation_lbguy
    hide screen interrogation_lbgirl

    show businessman1 at newcenter

    with fade

    if braids_closed:
        
        bm1"Please, {w}give me time to compose myself."
        jump investigation_middle

    else:
        bm1 "I'll help however I can."

    $ braids_closed = False

    jump investigation_middle

label interrogation_bl:
    scene detective_seat

    hide screen interrogation_gg
    hide screen interrogation_bb
    hide screen interrogation_cc
    hide screen interrogation_albino
    hide screen interrogation_braids
    hide screen interrogation_bl
    hide screen interrogation_lbguy
    hide screen interrogation_lbgirl

    with fade

    show baristalady with vpunch

    
    if bl_closed:

        bl "Go fix your manners elsewhere."
        jump investigation_middle
    
    else:
        bl "Horrible! This is horrible!" with vpunch

    $ bl_closed = False

    jump investigation_middle

label interrogation_lbguy:
    scene detective_seat

    hide screen interrogation_gg
    hide screen interrogation_bb
    hide screen interrogation_cc
    hide screen interrogation_albino
    hide screen interrogation_braids
    hide screen interrogation_bl
    hide screen interrogation_lbguy
    hide screen interrogation_lbgirl

    show lovebirdguy at slightleft
    show lovebirdgirl at slightright

    with fade

    if lbgirl_closed or lbguy_closed = True:
        
        lbgirl "Leave us alone."
        jump investigation_middle

    else:
        lbgirl "This is all very disturbing."

    $ lbgirl_closed = False
    $ lbguy_closed = False

    jump investigation_middle

label interrogation_lbgirl:
    scene detective_seat 

    hide screen interrogation_gg
    hide screen interrogation_bb
    hide screen interrogation_cc
    hide screen interrogation_albino
    hide screen interrogation_braids
    hide screen interrogation_bl
    hide screen interrogation_lbguy
    hide screen interrogation_lbgirl

    show lovebirdguy at slightleft
    show lovebirdgirl at slightright

    with fade

    if lbgirl_closed or lbguy_closed = True:
        
        lbgirl "Leave us alone."
        jump investigation_middle

    else:
        lbgirl "This is all very disturbing."

    $ lbgirl_closed = False
    $ lbguy_closed = False

    jump investigation_middle







    

    
##

label end:

    scene diner_lowangle_bg
    #with fade

    hide player

    #hide screen test
    hide screen notebook_button 
    hide screen qmenu_button

    with fade

    smcs "so they were the killer all along!"

    smcs "...the more you know."

    scene blackout
    with fade 

label rude_ending:

    hide baristalady

    if persistent.rudeending == True:

        call screen rude_ending

    else:

        pass

    


##
    return
